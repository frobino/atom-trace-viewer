# Architecture

Atom-trace-viewer enables the usage of Google's Chrome Trace-Viewer inside of the Atom editor.

Chrome Trace-Viewer can be executed in a browser.
The Atom-trace-viewer package just creates a browser "wrapper" around the Chrome Trace-Viewer code.
The browser "wrapper" is inspired from [atom-browser](https://github.com/sean-codes/atom-browser).

## Atom browser

The atom-browser package source code has been used to write lib/atom-trace-viewer.js
and lib/atom-trace-viewer-view.js,
so that the browser is redirected to the Trace-viewer standalone tracing/index.html file.
Parameters are also provided to the web address to give the json trace as input to the Trace-viewer app.

lib/atom-trace-viewer-view.js:
- create the browser view, i.e. navbar (where the user insert the trace to be open)
  and the webview (where the user see the html page). Note that navbar and webview
  are created by parsing the templates/*.json files.

lib/atom-trace-viewer.js:
- instantiate the view from above inside atom.
- register listeners etc, so that depending on user actions some actions on the view
  are executed.

## Google's Chrome Trace-Viewer

Chrome Trace-Viewer is the javascript frontend for Chrome about:tracing and Android systrace.
The Trace-Viewer source code is available in [project catapult](https://github.com/catapult-project/catapult).
Trace-Viewer is provided as standalone index.html page, and is is copies *as is* in the lib/tracing folder.

## Folder structure

Folder structure (partly autogenerated from Package Generator)

```
├── CHANGELOG.md
├── LICENSE.md
├── README.md
├── keymaps
│   └── atom-trace-viewer.json  <- Specifies hot-keys and shortcuts for commands
├── lib                         <- Package code
│   ├── tracing                 <- Chrome trace viewer code
│   ├── atom-trace-viewer-view.js
│   └── atom-trace-viewer.js    <- Entry point of your package
├── menus
│   └── atom-trace-viewer.json  <- Menu options to run package commands from the Atom toolbar (at the top), context menu (left, etc)
├── package.json                <- Description and library dependencies of your package
├── spec                        <- Tests directory (Jasmine) of your package
│   ├── my-package-spec.js
│   └── my-package-view-spec.js
└── styles                      <- Stylesheets used by your package
└── package.json                <- how Atom will know where to retrieve the package details from
└── templates/                  <- CUSTOM folder for this project. Used by lib/atom-trace-viewer-view.js to generate view

```
